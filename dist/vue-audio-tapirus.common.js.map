{"version":3,"file":"vue-audio-tapirus.common.js","mappings":"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","sources":["webpack://vue-audio-tapirus/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue-audio-tapirus/webpack/bootstrap","webpack://vue-audio-tapirus/webpack/runtime/define property getters","webpack://vue-audio-tapirus/webpack/runtime/hasOwnProperty shorthand","webpack://vue-audio-tapirus/webpack/runtime/publicPath","webpack://vue-audio-tapirus/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://vue-audio-tapirus/external commonjs2 {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://vue-audio-tapirus/./src/components/TapirWidget.vue","webpack://vue-audio-tapirus/./src/components/TapirWidget.vue?b81b","webpack://vue-audio-tapirus/./src/api/Service.js","webpack://vue-audio-tapirus/./node_modules/lib-wav-encoder/index.js","webpack://vue-audio-tapirus/./node_modules/convert-time-to-mmss/index.js","webpack://vue-audio-tapirus/./node_modules/lib-wav-audio-recorder/index.js","webpack://vue-audio-tapirus/./src/components/IconButton.vue","webpack://vue-audio-tapirus/./src/components/IconButton.vue?26e7","webpack://vue-audio-tapirus/./src/components/IconButton.vue?d7d8","webpack://vue-audio-tapirus/./src/components/IconButton.vue?5d45","webpack://vue-audio-tapirus/./src/components/TapirWidget.vue?e468","webpack://vue-audio-tapirus/./src/components/TapirWidget.vue?fd73","webpack://vue-audio-tapirus/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"\";","/* eslint-disable no-var */\n// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","var __WEBPACK_NAMESPACE_OBJECT__ = require(\"vue\");","<template>\n  <div class=\"text-center font-sans w-96 mx-auto\">\n    <div>\n      <icon-button\n        :style=\"{ 'border-color': buttonColor }\"\n        :class=\"buttonClass\"\n        v-if=\"recording\"\n        name=\"stop\"\n        @click=\"toggleRecording\"\n      />\n      <icon-button\n        :style=\"{ 'border-color': buttonColor }\"\n        :class=\"buttonClass\"\n        v-else\n        name=\"mic\"\n        @click=\"toggleRecording\"\n      />\n    </div>\n    <div class=\"text-sm text-red-400\">{{ errorMessage }}</div>\n  </div>\n</template>\n\n<script>\nimport Service from \"../api/Service\";\nimport Recorder from \"lib-wav-audio-recorder\"\nimport convertTimeMMSS from \"convert-time-to-mmss\"\nimport \"../styles/app.css\";\nimport IconButton from \"./IconButton.vue\";\n\nconst INSTRUCTION_MESSAGE = \"Click icon to start recording message.\";\nconst INSTRUCTION_MESSAGE_STOP = \"Click icon again to stop recording.\";\nconst ERROR_MESSAGE =\n  \"Failed to use microphone. Please refresh and try again and permit the use of a microphone.\";\nconst SUCCESS_MESSAGE = \"Successfully recorded message!\";\nconst SUCCESS_MESSAGE_SUBMIT = \"Successfully submitted audio message! Thank you!\";\nconst ERROR_SUBMITTING_MESSAGE = \"Error submitting audio message! Please try again later.\";\n\nexport default {\n  name: \"TapirWidget\",\n  props: {\n    // in minutes\n    time: { type: Number, default: 1 },\n    bitRate: { type: Number, default: 128 },\n    sampleRate: { type: Number, default: 44100 },\n    backendEndpoint: { type: String },\n    buttonColor: { type: String, default: \"green\" },\n\n    // callback functions\n    afterRecording: { type: Function },\n    successfulUpload: { type: Function },\n    failedUpload: { type: Function },\n    customUpload: { type: Function, default: null }\n  },\n  components: {\n    IconButton,\n  },\n  data() {\n    return {\n      recording: false,\n      recordedAudio: null,\n      recordedBlob: null,\n      recorder: null,\n      successMessage: null,\n      errorMessage: null,\n      instructionMessage: INSTRUCTION_MESSAGE,\n    };\n  },\n  computed: {\n    buttonClass() {\n      return \"mx-auto h-14 w-14 fill-current text-black cursor-pointer rounded-50 border-2 m-4 p-2\";\n    },\n    recordedTime() {\n      if (this.time && this.recorder?.duration >= this.time * 60) {\n        this.toggleRecording();\n      }\n      return convertTimeMMSS(this.recorder?.duration);\n    },\n  },\n  beforeUnmount() {\n    if (this.recording) {\n      this.stopRecorder();\n    }\n  },\n  methods: {\n    toggleRecording() {\n      this.recording = !this.recording;\n      if (this.recording) {\n        this.initRecorder();\n      } else {\n        this.stopRecording();\n      }\n    },\n    initRecorder() {\n      this.recorder = new Recorder({\n        micFailed: this.micFailed,\n        bitRate: this.bitRate,\n        sampleRate: this.sampleRate,\n      });\n      this.recorder.start();\n      this.successMessage = null;\n      this.errorMessage = null;\n      this.instructionMessage = INSTRUCTION_MESSAGE_STOP;\n      this.service = new Service(this.backendEndpoint);\n    },\n    stopRecording() {\n      this.recorder.stop();\n      const recordList = this.recorder.recordList();\n      this.recordedAudio = recordList[0].url;\n      this.recordedBlob = recordList[0].blob;\n      if (this.recordedAudio) {\n        this.successMessage = SUCCESS_MESSAGE;\n        this.instructionMessage = null;\n      }\n      if (this.afterRecording) {\n        this.afterRecording();\n        this.sendData();\n      }\n    },\n    async sendData() {\n      if (!this.recordedBlob) {\n        return;\n      }\n\n      let result = null;\n      if (this.customUpload) {\n        result = await this.customUpload(this.recordedBlob);\n      } else {\n        result = await this.service.postBackend(this.recordedBlob);\n      }\n\n      if (result) {\n        this.errorMessage = null;\n        this.successMessage = SUCCESS_MESSAGE_SUBMIT;\n        if (this.successfulUpload) {\n          this.successfulUpload();\n        }\n      } else {\n        // error uploading\n        this.successMessage = null;\n        this.errorMessage = ERROR_SUBMITTING_MESSAGE;\n        if (this.failedUpload) {\n          this.failedUpload();\n        }\n      }\n    },\n    micFailed() {\n      this.recording = false;\n      this.instructionMessage = INSTRUCTION_MESSAGE;\n      this.errorMessage = ERROR_MESSAGE;\n    },\n  },\n};\n</script>\n","export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./TapirWidget.vue?vue&type=template&id=1e7db76f\"","export default class Service {\n  constructor(backendEndpoint) {\n    this.backendEndpoint = backendEndpoint;\n  }\n\n  // returns true if successfull, false if failed\n  async postBackend(recordedBlob) {\n    try {\n      const response = await fetch(this.backendEndpoint, {\n        method: \"POST\",\n        body: recordedBlob,\n      });\n      if (!response.ok) {\n        return false;\n      }\n\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n}\n","/* eslint-disable */\nexport default class {\n    constructor(options) {\n        this.bufferSize = options.bufferSize || 4096;\n        this.sampleRate = options.sampleRate;\n        this.samples = options.samples;\n    }\n\n    finish() {\n        this._joinSamples();\n\n        const buffer = new ArrayBuffer(44 + this.samples.length * 2);\n        const view = new DataView(buffer);\n\n        this._writeString(view, 0, 'RIFF'); // RIFF identifier\n        view.setUint32(4, 36 + this.samples.length * 2, true); // RIFF chunk length\n        this._writeString(view, 8, 'WAVE'); // RIFF type\n        this._writeString(view, 12, 'fmt '); // format chunk identifier\n        view.setUint32(16, 16, true); // format chunk length\n        view.setUint16(20, 1, true); // sample format (raw)\n        view.setUint16(22, 1, true); // channel count\n        view.setUint32(24, this.sampleRate, true); // sample rate\n        view.setUint32(28, this.sampleRate * 4, true); // byte rate (sample rate * block align)\n        view.setUint16(32, 4, true); // block align (channel count * bytes per sample)\n        view.setUint16(34, 16, true); // bits per sample\n        this._writeString(view, 36, 'data'); // data chunk identifier\n        view.setUint32(40, this.samples.length * 2, true); // data chunk length\n\n        this._floatTo16BitPCM(view, 44, this.samples);\n\n        const blob = new Blob([view], { type: 'audio/wav' });\n\n        return {\n            id: Date.now(),\n            blob,\n            url: URL.createObjectURL(blob),\n        };\n    }\n\n    _floatTo16BitPCM(output, offset, input) {\n        for (let i = 0; i < input.length; i++, offset += 2) {\n            const s = Math.max(-1, Math.min(1, input[i]));\n            output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n        }\n    }\n\n    _joinSamples() {\n        const recordLength = this.samples.length * this.bufferSize;\n        const joinedSamples = new Float64Array(recordLength);\n        let offset = 0;\n\n        for (let i = 0; i < this.samples.length; i++) {\n            const sample = this.samples[i];\n            joinedSamples.set(sample, offset);\n            offset += sample.length;\n        }\n\n        this.samples = joinedSamples;\n    }\n\n    _writeString(view, offset, string) {\n        for (let i = 0; i < string.length; i++) {\n            view.setUint8(offset + i, string.charCodeAt(i));\n        }\n    }\n}\n","export default function convertTimeMMSS(seconds) {\n    if (!seconds) {\n        return null;\n    }\n    return new Date(seconds * 1000).toISOString().substr(14, 5);\n}\n","/* eslint-disable */\nimport WavEncoder from \"lib-wav-encoder\"\nimport convertTimeMMSS from \"convert-time-to-mmss\"\n\n\nexport default class Recorder {\n    constructor(options = {}) {\n        this.beforeRecording = options.beforeRecording;\n        this.pauseRecording = options.pauseRecording;\n        this.afterRecording = options.afterRecording;\n        this.micFailed = options.micFailed;\n\n        this.encoderOptions = {\n            bitRate: options.bitRate,\n            sampleRate: options.sampleRate,\n        };\n\n        this.bufferSize = 4096;\n        this.records = [];\n\n        this.isPause = false;\n        this.isRecording = false;\n\n        this.duration = 0;\n        this.volume = 0;\n\n        this.wavSamples = [];\n\n        this._duration = 0;\n    }\n\n    start() {\n        const constraints = {\n            video: false,\n            audio: {\n                channelCount: 1,\n                echoCancellation: false,\n            },\n        };\n\n        this.beforeRecording && this.beforeRecording(\"start recording\");\n\n        navigator.mediaDevices\n            .getUserMedia(constraints)\n            .then(this._micCaptured.bind(this))\n            .catch(this._micError.bind(this));\n\n        this.isPause = false;\n        this.isRecording = true;\n    }\n\n    stop() {\n        this.stream.getTracks().forEach((track) => track.stop());\n        this.input.disconnect();\n        this.processor.disconnect();\n        this.context.close();\n\n        let record = null;\n\n        const wavEncoder = new WavEncoder({\n            bufferSize: this.bufferSize,\n            sampleRate: this.encoderOptions.sampleRate,\n            samples: this.wavSamples,\n        });\n        record = wavEncoder.finish();\n        this.wavSamples = [];\n\n        record.duration = convertTimeMMSS(this.duration);\n        this.records.push(record);\n\n        this._duration = 0;\n        this.duration = 0;\n\n        this.isPause = false;\n        this.isRecording = false;\n\n        this.afterRecording && this.afterRecording(record);\n    }\n\n    pause() {\n        this.stream.getTracks().forEach((track) => track.stop());\n        this.input.disconnect();\n        this.processor.disconnect();\n\n        this._duration = this.duration;\n        this.isPause = true;\n\n        this.pauseRecording && this.pauseRecording(\"pause recording\");\n    }\n\n    recordList() {\n        return this.records;\n    }\n\n    lastRecord() {\n        return this.records.slice(-1).pop();\n    }\n\n    _micCaptured(stream) {\n        this.context = new (window.AudioContext || window.webkitAudioContext)();\n        this.duration = this._duration;\n        this.input = this.context.createMediaStreamSource(stream);\n        this.processor = this.context.createScriptProcessor(this.bufferSize, 1, 1);\n        this.stream = stream;\n\n        this.processor.onaudioprocess = (ev) => {\n            const sample = ev.inputBuffer.getChannelData(0);\n            let sum = 0.0;\n\n            this.wavSamples.push(new Float32Array(sample));\n\n            for (let i = 0; i < sample.length; ++i) {\n                sum += sample[i] * sample[i];\n            }\n\n            this.duration = parseFloat(this._duration) + parseFloat(this.context.currentTime.toFixed(2));\n            this.volume = Math.sqrt(sum / sample.length).toFixed(2);\n        };\n\n        this.input.connect(this.processor);\n        this.processor.connect(this.context.destination);\n    }\n\n    _micError(error) {\n        this.micFailed && this.micFailed(error);\n    }\n}\n","<template>\n  <div v-html=\"icons[name]\"></div>\n</template>\n\n<script>\nexport default {\n  props: {\n    name: { type: String },\n  },\n  data() {\n    return {\n      icons: {\n        download: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/><path fill=\"none\" d=\"M0 0h24v24H0z\"/></svg>',\n        mic: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n        play: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8 5v14l11-7z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n        save: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"/></svg>',\n        stop: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 6h12v12H6z\"/></svg>',\n        volume: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n      },\n    };\n  },\n};\n</script>\n","export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./IconButton.vue?vue&type=template&id=3ae5c9e4\"","export { default } from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./IconButton.vue?vue&type=script&lang=js\"; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./IconButton.vue?vue&type=script&lang=js\"","import { render } from \"./IconButton.vue?vue&type=template&id=3ae5c9e4\"\nimport script from \"./IconButton.vue?vue&type=script&lang=js\"\nexport * from \"./IconButton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/markusweiss/Documents/Webprojekte/vue-audio-tapirus/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export { default } from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./TapirWidget.vue?vue&type=script&lang=js\"; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./TapirWidget.vue?vue&type=script&lang=js\"","import { render } from \"./TapirWidget.vue?vue&type=template&id=1e7db76f\"\nimport script from \"./TapirWidget.vue?vue&type=script&lang=js\"\nexport * from \"./TapirWidget.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/markusweiss/Documents/Webprojekte/vue-audio-tapirus/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$data","_createBlock","_component_icon_button","style","$props","$options","name","onClick","_hoisted_2","Service","constructor","backendEndpoint","postBackend","recordedBlob","response","fetch","method","body","ok","error","innerHTML","props","type","String","data","icons","download","mic","play","save","stop","volume","Recorder","convertTimeMMSS","IconButton","INSTRUCTION_MESSAGE","INSTRUCTION_MESSAGE_STOP","ERROR_MESSAGE","SUCCESS_MESSAGE","SUCCESS_MESSAGE_SUBMIT","ERROR_SUBMITTING_MESSAGE","time","Number","default","bitRate","sampleRate","buttonColor","afterRecording","Function","successfulUpload","failedUpload","customUpload","components","recording","recordedAudio","recorder","successMessage","errorMessage","instructionMessage","computed","buttonClass","recordedTime","duration","toggleRecording","beforeUnmount","stopRecorder","methods","initRecorder","stopRecording","micFailed","start","service","recordList","url","blob","sendData","result"],"sourceRoot":""}