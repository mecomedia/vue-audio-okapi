{"version":3,"file":"vue-audio-tapirus.umd.min.js","mappings":"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","sources":["webpack://vue-audio-tapirus/webpack/universalModuleDefinition","webpack://vue-audio-tapirus/./node_modules/vue-loader/dist/exportHelper.js","webpack://vue-audio-tapirus/external umd {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://vue-audio-tapirus/webpack/bootstrap","webpack://vue-audio-tapirus/webpack/runtime/define property getters","webpack://vue-audio-tapirus/webpack/runtime/hasOwnProperty shorthand","webpack://vue-audio-tapirus/webpack/runtime/publicPath","webpack://vue-audio-tapirus/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://vue-audio-tapirus/./src/components/TapirWidget.vue","webpack://vue-audio-tapirus/./src/api/Service.js","webpack://vue-audio-tapirus/./node_modules/lib-wav-encoder/index.js","webpack://vue-audio-tapirus/./node_modules/convert-time-to-mmss/index.js","webpack://vue-audio-tapirus/./node_modules/lib-wav-audio-recorder/index.js","webpack://vue-audio-tapirus/./src/components/IconButton.vue","webpack://vue-audio-tapirus/./src/components/IconButton.vue?5d45","webpack://vue-audio-tapirus/./src/components/TapirWidget.vue?fd73","webpack://vue-audio-tapirus/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-audio-tapirus\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"vue-audio-tapirus\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__274__) {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__274__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"\";","/* eslint-disable no-var */\n// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","<template>\n  <div class=\"text-center font-sans w-96 mx-auto\">\n    <div>\n      <icon-button\n        :style=\"{ 'border-color': buttonColor }\"\n        :class=\"buttonClass\"\n        v-if=\"recording\"\n        name=\"stop\"\n        @click=\"toggleRecording\"\n      />\n      <icon-button\n        :style=\"{ 'border-color': buttonColor }\"\n        :class=\"buttonClass\"\n        v-else\n        name=\"mic\"\n        @click=\"toggleRecording\"\n      />\n    </div>\n    <div class=\"text-sm text-red-400\">{{ errorMessage }}</div>\n  </div>\n</template>\n\n<script>\nimport Service from \"../api/Service\";\nimport Recorder from \"lib-wav-audio-recorder\"\nimport convertTimeMMSS from \"convert-time-to-mmss\"\nimport \"../styles/app.css\";\nimport IconButton from \"./IconButton.vue\";\n\nconst INSTRUCTION_MESSAGE = \"Click icon to start recording message.\";\nconst INSTRUCTION_MESSAGE_STOP = \"Click icon again to stop recording.\";\nconst ERROR_MESSAGE =\n  \"Failed to use microphone. Please refresh and try again and permit the use of a microphone.\";\nconst SUCCESS_MESSAGE = \"Successfully recorded message!\";\nconst SUCCESS_MESSAGE_SUBMIT = \"Successfully submitted audio message! Thank you!\";\nconst ERROR_SUBMITTING_MESSAGE = \"Error submitting audio message! Please try again later.\";\n\nexport default {\n  name: \"TapirWidget\",\n  props: {\n    // in minutes\n    time: { type: Number, default: 1 },\n    bitRate: { type: Number, default: 128 },\n    sampleRate: { type: Number, default: 44100 },\n    backendEndpoint: { type: String },\n    buttonColor: { type: String, default: \"green\" },\n\n    // callback functions\n    afterRecording: { type: Function },\n    successfulUpload: { type: Function },\n    failedUpload: { type: Function },\n    customUpload: { type: Function, default: null }\n  },\n  components: {\n    IconButton,\n  },\n  data() {\n    return {\n      recording: false,\n      recordedAudio: null,\n      recordedBlob: null,\n      recorder: null,\n      successMessage: null,\n      errorMessage: null,\n      instructionMessage: INSTRUCTION_MESSAGE,\n    };\n  },\n  computed: {\n    buttonClass() {\n      return \"mx-auto h-14 w-14 fill-current text-black cursor-pointer rounded-50 border-2 m-4 p-2\";\n    },\n    recordedTime() {\n      if (this.time && this.recorder?.duration >= this.time * 60) {\n        this.toggleRecording();\n      }\n      return convertTimeMMSS(this.recorder?.duration);\n    },\n  },\n  beforeUnmount() {\n    if (this.recording) {\n      this.stopRecorder();\n    }\n  },\n  methods: {\n    toggleRecording() {\n      this.recording = !this.recording;\n      if (this.recording) {\n        this.initRecorder();\n      } else {\n        this.stopRecording();\n      }\n    },\n    initRecorder() {\n      this.recorder = new Recorder({\n        micFailed: this.micFailed,\n        bitRate: this.bitRate,\n        sampleRate: this.sampleRate,\n      });\n      this.recorder.start();\n      this.successMessage = null;\n      this.errorMessage = null;\n      this.instructionMessage = INSTRUCTION_MESSAGE_STOP;\n      this.service = new Service(this.backendEndpoint);\n    },\n    stopRecording() {\n      this.recorder.stop();\n      const recordList = this.recorder.recordList();\n      this.recordedAudio = recordList[0].url;\n      this.recordedBlob = recordList[0].blob;\n      if (this.recordedAudio) {\n        this.successMessage = SUCCESS_MESSAGE;\n        this.instructionMessage = null;\n      }\n      if (this.afterRecording) {\n        this.afterRecording();\n        this.sendData();\n      }\n    },\n    async sendData() {\n      if (!this.recordedBlob) {\n        return;\n      }\n\n      let result = null;\n      if (this.customUpload) {\n        result = await this.customUpload(this.recordedBlob);\n      } else {\n        result = await this.service.postBackend(this.recordedBlob);\n      }\n\n      if (result) {\n        this.errorMessage = null;\n        this.successMessage = SUCCESS_MESSAGE_SUBMIT;\n        if (this.successfulUpload) {\n          this.successfulUpload();\n        }\n      } else {\n        // error uploading\n        this.successMessage = null;\n        this.errorMessage = ERROR_SUBMITTING_MESSAGE;\n        if (this.failedUpload) {\n          this.failedUpload();\n        }\n      }\n    },\n    micFailed() {\n      this.recording = false;\n      this.instructionMessage = INSTRUCTION_MESSAGE;\n      this.errorMessage = ERROR_MESSAGE;\n    },\n  },\n};\n</script>\n","export default class Service {\n  constructor(backendEndpoint) {\n    this.backendEndpoint = backendEndpoint;\n  }\n\n  // returns true if successfull, false if failed\n  async postBackend(recordedBlob) {\n    try {\n      const response = await fetch(this.backendEndpoint, {\n        method: \"POST\",\n        body: recordedBlob,\n      });\n      if (!response.ok) {\n        return false;\n      }\n\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n}\n","/* eslint-disable */\nexport default class {\n    constructor(options) {\n        this.bufferSize = options.bufferSize || 4096;\n        this.sampleRate = options.sampleRate;\n        this.samples = options.samples;\n    }\n\n    finish() {\n        this._joinSamples();\n\n        const buffer = new ArrayBuffer(44 + this.samples.length * 2);\n        const view = new DataView(buffer);\n\n        this._writeString(view, 0, 'RIFF'); // RIFF identifier\n        view.setUint32(4, 36 + this.samples.length * 2, true); // RIFF chunk length\n        this._writeString(view, 8, 'WAVE'); // RIFF type\n        this._writeString(view, 12, 'fmt '); // format chunk identifier\n        view.setUint32(16, 16, true); // format chunk length\n        view.setUint16(20, 1, true); // sample format (raw)\n        view.setUint16(22, 1, true); // channel count\n        view.setUint32(24, this.sampleRate, true); // sample rate\n        view.setUint32(28, this.sampleRate * 4, true); // byte rate (sample rate * block align)\n        view.setUint16(32, 4, true); // block align (channel count * bytes per sample)\n        view.setUint16(34, 16, true); // bits per sample\n        this._writeString(view, 36, 'data'); // data chunk identifier\n        view.setUint32(40, this.samples.length * 2, true); // data chunk length\n\n        this._floatTo16BitPCM(view, 44, this.samples);\n\n        const blob = new Blob([view], { type: 'audio/wav' });\n\n        return {\n            id: Date.now(),\n            blob,\n            url: URL.createObjectURL(blob),\n        };\n    }\n\n    _floatTo16BitPCM(output, offset, input) {\n        for (let i = 0; i < input.length; i++, offset += 2) {\n            const s = Math.max(-1, Math.min(1, input[i]));\n            output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n        }\n    }\n\n    _joinSamples() {\n        const recordLength = this.samples.length * this.bufferSize;\n        const joinedSamples = new Float64Array(recordLength);\n        let offset = 0;\n\n        for (let i = 0; i < this.samples.length; i++) {\n            const sample = this.samples[i];\n            joinedSamples.set(sample, offset);\n            offset += sample.length;\n        }\n\n        this.samples = joinedSamples;\n    }\n\n    _writeString(view, offset, string) {\n        for (let i = 0; i < string.length; i++) {\n            view.setUint8(offset + i, string.charCodeAt(i));\n        }\n    }\n}\n","export default function convertTimeMMSS(seconds) {\n    if (!seconds) {\n        return null;\n    }\n    return new Date(seconds * 1000).toISOString().substr(14, 5);\n}\n","/* eslint-disable */\nimport WavEncoder from \"lib-wav-encoder\"\nimport convertTimeMMSS from \"convert-time-to-mmss\"\n\n\nexport default class Recorder {\n    constructor(options = {}) {\n        this.beforeRecording = options.beforeRecording;\n        this.pauseRecording = options.pauseRecording;\n        this.afterRecording = options.afterRecording;\n        this.micFailed = options.micFailed;\n\n        this.encoderOptions = {\n            bitRate: options.bitRate,\n            sampleRate: options.sampleRate,\n        };\n\n        this.bufferSize = 4096;\n        this.records = [];\n\n        this.isPause = false;\n        this.isRecording = false;\n\n        this.duration = 0;\n        this.volume = 0;\n\n        this.wavSamples = [];\n\n        this._duration = 0;\n    }\n\n    start() {\n        const constraints = {\n            video: false,\n            audio: {\n                channelCount: 1,\n                echoCancellation: false,\n            },\n        };\n\n        this.beforeRecording && this.beforeRecording(\"start recording\");\n\n        navigator.mediaDevices\n            .getUserMedia(constraints)\n            .then(this._micCaptured.bind(this))\n            .catch(this._micError.bind(this));\n\n        this.isPause = false;\n        this.isRecording = true;\n    }\n\n    stop() {\n        this.stream.getTracks().forEach((track) => track.stop());\n        this.input.disconnect();\n        this.processor.disconnect();\n        this.context.close();\n\n        let record = null;\n\n        const wavEncoder = new WavEncoder({\n            bufferSize: this.bufferSize,\n            sampleRate: this.encoderOptions.sampleRate,\n            samples: this.wavSamples,\n        });\n        record = wavEncoder.finish();\n        this.wavSamples = [];\n\n        record.duration = convertTimeMMSS(this.duration);\n        this.records.push(record);\n\n        this._duration = 0;\n        this.duration = 0;\n\n        this.isPause = false;\n        this.isRecording = false;\n\n        this.afterRecording && this.afterRecording(record);\n    }\n\n    pause() {\n        this.stream.getTracks().forEach((track) => track.stop());\n        this.input.disconnect();\n        this.processor.disconnect();\n\n        this._duration = this.duration;\n        this.isPause = true;\n\n        this.pauseRecording && this.pauseRecording(\"pause recording\");\n    }\n\n    recordList() {\n        return this.records;\n    }\n\n    lastRecord() {\n        return this.records.slice(-1).pop();\n    }\n\n    _micCaptured(stream) {\n        this.context = new (window.AudioContext || window.webkitAudioContext)();\n        this.duration = this._duration;\n        this.input = this.context.createMediaStreamSource(stream);\n        this.processor = this.context.createScriptProcessor(this.bufferSize, 1, 1);\n        this.stream = stream;\n\n        this.processor.onaudioprocess = (ev) => {\n            const sample = ev.inputBuffer.getChannelData(0);\n            let sum = 0.0;\n\n            this.wavSamples.push(new Float32Array(sample));\n\n            for (let i = 0; i < sample.length; ++i) {\n                sum += sample[i] * sample[i];\n            }\n\n            this.duration = parseFloat(this._duration) + parseFloat(this.context.currentTime.toFixed(2));\n            this.volume = Math.sqrt(sum / sample.length).toFixed(2);\n        };\n\n        this.input.connect(this.processor);\n        this.processor.connect(this.context.destination);\n    }\n\n    _micError(error) {\n        this.micFailed && this.micFailed(error);\n    }\n}\n","<template>\n  <div v-html=\"icons[name]\"></div>\n</template>\n\n<script>\nexport default {\n  props: {\n    name: { type: String },\n  },\n  data() {\n    return {\n      icons: {\n        download: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/><path fill=\"none\" d=\"M0 0h24v24H0z\"/></svg>',\n        mic: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n        play: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8 5v14l11-7z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n        save: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z\"/></svg>',\n        stop: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 6h12v12H6z\"/></svg>',\n        volume: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>',\n      },\n    };\n  },\n};\n</script>\n","import { render } from \"./IconButton.vue?vue&type=template&id=3ae5c9e4\"\nimport script from \"./IconButton.vue?vue&type=script&lang=js\"\nexport * from \"./IconButton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/markusweiss/Documents/Webprojekte/vue-audio-tapirus/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TapirWidget.vue?vue&type=template&id=1e7db76f\"\nimport script from \"./TapirWidget.vue?vue&type=script&lang=js\"\nexport * from \"./TapirWidget.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/markusweiss/Documents/Webprojekte/vue-audio-tapirus/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__274__","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","p","window","currentScript","document","src","match","class","_createElementBlock","_hoisted_1","_createElementVNode","$data","_createBlock","_component_icon_button","style","$props","$options","name","onClick","_hoisted_2","Service","constructor","backendEndpoint","postBackend","recordedBlob","response","fetch","method","body","ok","error","options","bufferSize","sampleRate","samples","finish","_joinSamples","buffer","ArrayBuffer","length","view","DataView","_writeString","setUint32","setUint16","_floatTo16BitPCM","blob","Blob","type","id","Date","now","url","URL","createObjectURL","output","offset","input","i","s","Math","max","min","setInt16","recordLength","joinedSamples","Float64Array","sample","set","string","setUint8","charCodeAt","convertTimeMMSS","seconds","toISOString","substr","Recorder","beforeRecording","pauseRecording","afterRecording","micFailed","encoderOptions","bitRate","records","isPause","isRecording","duration","volume","wavSamples","_duration","start","constraints","video","audio","channelCount","echoCancellation","navigator","mediaDevices","getUserMedia","then","_micCaptured","bind","catch","_micError","stop","stream","getTracks","forEach","track","disconnect","processor","context","close","record","wavEncoder","push","pause","recordList","lastRecord","slice","pop","AudioContext","webkitAudioContext","createMediaStreamSource","createScriptProcessor","onaudioprocess","ev","inputBuffer","getChannelData","sum","Float32Array","parseFloat","currentTime","toFixed","sqrt","connect","destination","innerHTML","String","data","icons","download","mic","play","save","__exports__","INSTRUCTION_MESSAGE","INSTRUCTION_MESSAGE_STOP","ERROR_MESSAGE","SUCCESS_MESSAGE","SUCCESS_MESSAGE_SUBMIT","ERROR_SUBMITTING_MESSAGE","time","Number","default","buttonColor","Function","successfulUpload","failedUpload","customUpload","components","IconButton","recording","recordedAudio","recorder","successMessage","errorMessage","instructionMessage","computed","buttonClass","recordedTime","toggleRecording","beforeUnmount","stopRecorder","methods","initRecorder","stopRecording","service","sendData","result","render"],"sourceRoot":""}